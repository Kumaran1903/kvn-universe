import NextAuth from "next-auth";
import { authConfig } from "./lib/auth.config";

export default NextAuth(authConfig).auth;

export const config = {
  matcher: ["/((?!api|static|.*\\..*|_next).*)"],
};

// import { NextResponse, NextRequest } from "next/server";
// import { v4 as uuidv4 } from "uuid";
// export function middleware(request) {
//   const response = NextResponse.next();
//   const guestSessionId = request.cookies.get("guestSessionId");
//   if (!guestSessionId) {
//     const newGuestSessionId = `guest_${uuidv4()}`;
//     response.cookies.set("guestSessionId", newGuestSessionId, {
//       maxAge: 60 * 60 * 24 * 30, // 30 days
//       path: "/",
//     });
//   }
//   return response;
// }

//   const response = NextResponse.next();
//   const theme = request.cookies.get("theme");
//   if (!theme) {
//     response.cookies.set("theme", "dark");
//   }
//   return response;
// }
//   if (request.nextUrl.pathname == "/cart") {
//     return NextResponse.redirect(new URL("/store", request.url));
//   }
//   return NextResponse.redirect(new URL("/store", request.url));
// }
// export const config = {
//   matcher: "/",
// };
